# ゲーム機能実装計画書
**トキワシティ訓練所 - 実装すべき核心機能**

---

## 現状分析

既存の実装状況：
- ✅ 基本UIフレームワーク（PixelButton、PixelCard等）
- ✅ 認証システム（Supabase）
- ✅ データベース構造
- ✅ モックデータシステム

**❌ 欠けている核心機能：ゲームとして遊べる仕組みがない**

---

## 実装優先度1: 最低限のゲーム体験

### 1.1 派遣システム（基本版）
**目的**: プレイヤーがトレーナーを派遣し、結果を得られる

**実装内容**:
- 派遣先選択UI
- 成功率計算ロジック
- 自動結果生成（時間経過後）
- 報酬配布システム

**重要度**: 🔥 最重要 - これなしではゲームにならない

### 1.2 ポケモン捕獲システム（基本版）
**目的**: 派遣でポケモンを入手できる

**実装内容**:
- 捕獲確率計算
- PokeAPIからのデータ取得
- 個体値ランダム生成
- パーティ追加ロジック

**重要度**: 🔥 最重要

### 1.3 基本的な経済システム
**目的**: お金の概念でゲームにリソース管理要素を追加

**実装内容**:
- 派遣報酬計算
- 基本的な支出（給与、維持費）
- 収支表示UI

**重要度**: 🔴 高

---

## 実装優先度2: ゲーム性向上

### 2.1 トレーナー職業・レベルシステム
**目的**: キャラクター成長でプレイヤーの長期目標を作る

**実装内容**:
- 職業別特化能力
- 経験値獲得・レベルアップ
- スキル解放システム

**重要度**: 🟡 中

### 2.2 バトルシステム（簡易版）
**目的**: ポケモンの強さに意味を持たせる

**実装内容**:
- 戦力値計算
- 勝率判定
- バトル結果生成

**重要度**: 🟡 中

### 2.3 施設効果システム
**目的**: 投資により効率向上の実感を与える

**実装内容**:
- 施設レベルと効果の関連付け
- ボーナス計算ロジック
- 効果可視化UI

**重要度**: 🟡 中

---

## 実装優先度3: 没入感・長期継続

### 3.1 リアルタイム介入システム
**目的**: プレイヤーの判断でゲーム結果が変わる体験

**実装内容**:
- イベント発生ロジック
- 選択肢提示UI
- 選択による結果変化

**重要度**: 🟢 低（但し魅力的）

### 3.2 データ可視化・分析
**目的**: 戦略性と達成感の向上

**実装内容**:
- 詳細統計表示
- 成長グラフ
- 効率分析ツール

**重要度**: 🟢 低

---

## 実装戦略

### フェーズ1: 最小限のゲーム（1-2週間）
1. 派遣システム基本実装
2. ポケモン捕獲システム
3. 基本的な経済システム
4. 結果表示UI

**完了条件**: トレーナーを派遣→ポケモン捕獲→お金獲得のループが回る

### フェーズ2: ゲーム性向上（2-3週間）
1. トレーナー成長システム
2. バトルシステム
3. 施設効果システム
4. バランス調整

**完了条件**: 戦略的判断が結果に影響し、長期成長が実感できる

### フェーズ3: 体験向上（追加開発）
1. リアルタイム介入
2. 詳細分析機能
3. UI/UX改善
4. コンテンツ追加

---

## 技術実装指針

### 1. ゲームロジックの分離
- `src/lib/game-logic/` に核心計算を集約
- UIから独立してテスト可能な設計

### 2. 段階的な複雑さ
- 最初は単純な計算式
- 後から詳細なバランス調整を追加

### 3. モック対応
- 全機能でモックデータ動作を保証
- 開発・デモ用途での使いやすさ

### 4. パフォーマンス考慮
- 重い計算はバックグラウンド実行
- 結果キャッシュで応答性確保

---

## 成功指標

### フェーズ1完了時
- [ ] 5分以内にゲームの楽しさが理解できる
- [ ] 派遣→結果→成長のループが機能する
- [ ] 基本的な戦略性（どこに派遣するか）がある

### フェーズ2完了時
- [ ] 30分以上継続してプレイできる
- [ ] 複数の戦略が成立する
- [ ] プレイヤーの判断で結果が変わる

### フェーズ3完了時
- [ ] 数時間〜数日間の継続プレイが楽しい
- [ ] 深い戦略性と最適化要素がある
- [ ] ランダム要素と戦略のバランスが良い

---

## 次のステップ

1. **フェーズ1の実装開始**
2. **gameLogic.ts の核心機能実装**
3. **派遣システムUI の改修**
4. **動作テストとバランス調整**

この計画に従って、段階的にゲームとして遊べる機能を実装していきます。